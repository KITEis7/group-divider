<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Divider for Discord</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; background: #f4f4f9; }
        textarea { width: 100%; height: 100px; margin-bottom: 10px; }
        .controls { margin-bottom: 20px; display: flex; gap: 10px; align-items: center; }
        button { padding: 10px 20px; cursor: pointer; background: #5865F2; color: white; border: none; border-radius: 5px; font-weight: bold; }
        button:hover { background: #4752C4; }
        #result { background: white; padding: 15px; border-radius: 5px; border: 1px solid #ccc; white-space: pre-wrap; margin-top: 20px; }
        input[type="text"] { flex-grow: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        /* ã‚¹ãƒãƒ›å‘ã‘ã®èª¿æ•´ */
@media (max-width: 480px) {
    body { padding: 10px; }
    button { 
        width: 100%; 
        padding: 15px; 
        font-size: 1.1rem; 
    }
    textarea { font-size: 16px; /* iPhoneã§å…¥åŠ›æ™‚ã«ã‚ºãƒ¼ãƒ ã•ã‚Œã‚‹ã®ã‚’é˜²ã */ }
}
    </style>
</head>
<body>

    <h2>ğŸ‘¥ ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘ãƒ„ãƒ¼ãƒ«</h2>
    
    <label>ãƒ¡ãƒ³ãƒãƒ¼åï¼ˆæ”¹è¡ŒåŒºåˆ‡ã‚Šï¼‰:</label>
    <textarea id="memberList" placeholder="ç”°ä¸­&#13;&#10;ä½è—¤&#13;&#10;éˆ´æœ¨..."></textarea>

    <div class="controls">
        <label>ã‚°ãƒ«ãƒ¼ãƒ—æ•°:</label>
        <select id="groupCount">
            <option value="2">2ã‚°ãƒ«ãƒ¼ãƒ—</option>
            <option value="3">3ã‚°ãƒ«ãƒ¼ãƒ—</option>
            <option value="4" selected>4ã‚°ãƒ«ãƒ¼ãƒ—</option>
        </select>
    </div>

    <div class="controls">
        <label>Discord ãƒãƒ£ãƒ³ãƒãƒ«URL:</label>
        <input type="text" id="discordUrl" placeholder="https://discord.com/channels/ã‚µãƒ¼ãƒID/ãƒãƒ£ãƒ³ãƒãƒ«ID">
    </div>

    <button onclick="divideAndGo()">ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘ ï¼† Discordã‚’é–‹ã</button>

    <div id="result">çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>

    <script>
        function divideAndGo() {
            const text = document.getElementById('memberList').value.trim();
            const n = parseInt(document.getElementById('groupCount').value);
            const discordUrl = document.getElementById('discordUrl').value.trim();
            
            if (!text) { alert('ãƒ¡ãƒ³ãƒãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }

            // ãƒ¡ãƒ³ãƒãƒ¼ã‚’é…åˆ—åŒ–ã—ã¦ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            let members = text.split(/\n/).map(m => m.trim()).filter(m => m !== "");
            for (let i = members.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [members[i], members[j]] = [members[j], members[i]];
            }

            // ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘ï¼ˆãªã‚‹ã¹ãå‡ç­‰ã«ï¼‰
            let groups = Array.from({ length: n }, () => []);
            members.forEach((member, index) => {
                groups[index % n].push(member);
            });

            // çµæœã®ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢
            let resultText = "ã€ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘çµæœã€‘\n";
            groups.forEach((group, i) => {
                if (group.length > 0) {
                    resultText += `\nãƒãƒ¼ãƒ  ${i + 1}: ${group.join(', ')}`;
                }
            });

            // ç”»é¢è¡¨ç¤º
            document.getElementById('result').innerText = resultText;

            // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
            navigator.clipboard.writeText(resultText).then(() => {
                alert('çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼Discordã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚');
                // Discordã‚’é–‹ã
                if (discordUrl) {
                    window.open(discordUrl, '_blank');
                } else {
                    window.open('https://discord.com/app', '_blank');
                }
            });
        }
    </script>
</body>
</html>